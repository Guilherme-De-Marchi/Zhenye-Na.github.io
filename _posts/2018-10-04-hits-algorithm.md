---
layout: post
title: "Introduction to HITS algorithm"
date: 2018-10-04
excerpt: "Hyperlink-Induced Topic Search"
tags: [Algorithms, Python]
mathjax: true
mathjax_autoNumber: true
---

# Hyperlink-Induced Topic Search - HITS algorithm


## Hubs and Authorities

This suggests a ranking procedure that we can try to make precise. First, we'll call the kinds of pages we were originally seeking — the prominent, highly endorsed answers to the queries — the $authorities$ for the query. We'll call the high-value lists the $hubs$ for the query. Now, for each page $p$, we’re trying to estimate its value as a potential authority and as a potential hub, and so we assign it two numerical scores: $auth(p)$ and $hub(p)$. Each of these starts out with a value equal to $1$, indicating that we're initially agnostic as to which is the best in either of these categories.


## Algorithm

In the HITS algorithm, the first step is to retrieve the most relevant pages to the search query. This set is called the root set and can be obtained by taking the top pages returned by a text-based search algorithm. A base set is generated by augmenting the root set with all the web pages that are linked from it and some of the pages that link to it. The web pages in the base set and all hyperlinks among those pages form a focused subgraph. The HITS computation is performed only on this focused subgraph. According to Kleinberg the reason for constructing a base set is to ensure that most (or many) of the strongest authorities are included.

Authority and hub values are defined in terms of one another in a mutual recursion. An authority value is computed as the sum of the scaled hub values that point to that page. A hub value is the sum of the scaled authority values of the pages it points to. Some implementations also consider the relevance of the linked pages.

The algorithm performs a series of iterations, each consisting of two basic steps:

- **Authority update**: Update each node's authority score to be equal to the sum of the hub scores of each node that points to it. That is, a node is given a high authority score by being linked from pages that are recognized as Hubs for information.
- **Hub update**: Update each node's hub score to be equal to the sum of the authority scores of each node that it points to. That is, a node is given a high hub score by linking to nodes that are considered to be authorities on the subject.

The Hub score and Authority score for a node is calculated with the following algorithm:

- Start with each node having a hub score and authority score of 1.
- Run the *authority update rule*
- Run the *hub update rule*
- Normalize the values by dividing each Hub score by square root of the sum of the squares of all Hub scores, and dividing each Authority score by square root of the sum of the squares of all Authority scores.
- Repeat from the second step as necessary.


HITS, like Page and Brin's PageRank, is an iterative algorithm based on the linkage of the documents on the web. However it does have some major differences:

- It is query dependent, that is, the (Hubs and Authority) scores resulting from the link analysis are influenced by the search terms;
- As a corollary, it is executed at query time, not at indexing time, with the associated hit on performance that accompanies query-time processing.
- It is not commonly used by search engines. (Though a similar algorithm was said to be used by Teoma, which was acquired by Ask Jeeves/Ask.com.)
- It computes two scores per document, hub and authority, as opposed to a single score;
- It is processed on a small subset of 'relevant' documents (a 'focused subgraph' or base set), not all documents as was the case with PageRank.


## Implementation

I have implemented HITS algorithm in Python, you can find source code [here](https://github.com/Zhenye-Na/cs498HS4/tree/master/hw1).


```python
"""
Implementation of HITS algorithm.
ref: https://en.wikipedia.org/wiki/HITS_algorithm
@date: Sep 24, 2018
@author: Zhenye Na
"""

import sys


def main():

    # read in data
    hubs = {}
    auths = {}

    # initial score
    hub_scores = {}
    auth_scores = {}

    num_of_links = sys.stdin.readline()
    line = sys.stdin.readline()
    while line:
        line_array = line.split(",")
        line_array = [int(i) for i in line_array]

        if line_array[0] in hubs:
            hubs[line_array[0]].append(line_array[1])
        else:
            hubs[line_array[0]] = [line_array[1]]

        hub_scores[line_array[0]] = 1

        if line_array[1] in auths:
            auths[line_array[1]].append(line_array[0])
        else:
            auths[line_array[1]] = [line_array[0]]

        auth_scores[line_array[1]] = 1

        try:
            line = sys.stdin.readline()
        except:
            break

    for iter in range(10):
        # update auths scores
        for auth_i, hub_i in auths.items():
            new_auth_scores = 0
            for hub_of_auth_i in hub_i:
                new_auth_scores += hub_scores[hub_of_auth_i]
            auth_scores[auth_i] = new_auth_scores

        for hub_i, auth_i in hubs.items():
            new_hub_scores = 0
            for auth_of_hub_i in auth_i:
                new_hub_scores += auth_scores[auth_of_hub_i]
            hub_scores[hub_i] = new_hub_scores

    sorted_hubs = []
    sorted_auths = []

    for hub in hub_scores:
        sorted_hubs.append([hub, hub_scores[hub]])

    for auth in auth_scores:
        sorted_auths.append([auth, auth_scores[auth]])

    sorted_auths.sort(key=lambda sl: (-sl[1], sl[0]))
    sorted_hubs.sort(key=lambda sl: (-sl[1], sl[0]))

    result_hubs = []
    result_auths = []
    for i in range(3):
        result_hubs.append(str(sorted_hubs[i][0]))
    for i in range(3):
        result_auths.append(str(sorted_auths[i][0]))

    print(",".join(result_hubs))
    print(",".join(result_auths))


if __name__ == '__main__':
    main()
```


## References

[1] David Easley and Jon Kleinberg, [*"Networks, Crowds, and Markets: Reasoning about a Highly Connected World - Chapter 14.2"*](https://github.com/Zhenye-Na/cs498HS4/blob/master/hw1/networks-book-ch14.pdf)  
[2] HITS algorithm from wiki, [*"HITS algorithm"*](https://en.wikipedia.org/wiki/HITS_algorithm#Algorithm)  
